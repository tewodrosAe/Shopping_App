import { useEffect, useRef, useState } from "react"
import { disableScroll } from "../utils"

function ItemCategories() {
  // react hook initialization
  const[clicked,setClicked] = useState(false) 
  const menu = useRef()
  
  // dropdown function
  const itemDropdown = () => {
    let disable = true
    if(!clicked){
      disableScroll(disable)
      setClicked(true)
    }
    else{
      disableScroll()
      setClicked(false)
    }
  }
  // useEffects
  useEffect(() => {
    const clickedOutside = (e) => {
        if(!menu.current?.contains(e.target)){
            itemDropdown()
        }
    }
    if(clicked){
        document.addEventListener('mousedown',clickedOutside)
    }
    return () => {
        document.removeEventListener('mousedown',clickedOutside)
    }
})
  return (
    <>
      <div className={`sidebar-wrap ${!clicked && "transform-out-left"}`}/>
      <div className={`svg ${clicked && "transform-out-up"}`} onClick={itemDropdown}>
        <svg width="16" height="17" viewBox="0 0 16 17" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M4.72908 7.53385C4.41771 7.53385 4.1808 7.39522 4.01834 7.11796C3.85589 6.84016 3.86266 6.56589 4.03865 6.29513L7.06437 1.36056C7.22683 1.10334 7.45697 0.974731 7.75481 0.974731C8.05264 0.974731 8.28279 1.10334 8.44524 1.36056L11.471 6.29513C11.647 6.56589 11.6537 6.84016 11.4913 7.11796C11.3288 7.39522 11.0919 7.53385 10.7805 7.53385H4.72908ZM12.2223 16.4689C11.207 16.4689 10.3438 16.1136 9.63279 15.4032C8.92232 14.6922 8.56708 13.829 8.56708 12.8136C8.56708 11.7983 8.92232 10.9351 9.63279 10.2241C10.3438 9.51363 11.207 9.15839 12.2223 9.15839C13.2377 9.15839 14.1008 9.51363 14.8118 10.2241C15.5223 10.9351 15.8776 11.7983 15.8776 12.8136C15.8776 13.829 15.5223 14.6922 14.8118 15.4032C14.1008 16.1136 13.2377 16.4689 12.2223 16.4689ZM1.25661 16.0627C1.02647 16.0627 0.833686 15.9847 0.678271 15.8288C0.522314 15.6734 0.444336 15.4806 0.444336 15.2505V10.3768C0.444336 10.1467 0.522314 9.95361 0.678271 9.79766C0.833686 9.64224 1.02647 9.56453 1.25661 9.56453H6.13026C6.3604 9.56453 6.55345 9.64224 6.70941 9.79766C6.86483 9.95361 6.94253 10.1467 6.94253 10.3768V15.2505C6.94253 15.4806 6.86483 15.6734 6.70941 15.8288C6.55345 15.9847 6.3604 16.0627 6.13026 16.0627H1.25661ZM12.2223 14.8443C12.7909 14.8443 13.2715 14.648 13.6641 14.2554C14.0567 13.8628 14.253 13.3822 14.253 12.8136C14.253 12.245 14.0567 11.7644 13.6641 11.3718C13.2715 10.9792 12.7909 10.7829 12.2223 10.7829C11.6537 10.7829 11.1731 10.9792 10.7805 11.3718C10.3879 11.7644 10.1916 12.245 10.1916 12.8136C10.1916 13.3822 10.3879 13.8628 10.7805 14.2554C11.1731 14.648 11.6537 14.8443 12.2223 14.8443ZM2.06889 14.4382H5.31798V11.1891H2.06889V14.4382ZM6.17087 5.9093H9.33874L7.75481 3.35063L6.17087 5.9093Z" fill="white"/>
        </svg>
      </div>
      <div ref={menu} className={`sidebar ${clicked && "sidebar-phone"}`}>
            <div id="sidebar-main">{ <svg width="16" height="17" viewBox="0 0 16 17" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M4.72908 7.53385C4.41771 7.53385 4.1808 7.39522 4.01834 7.11796C3.85589 6.84016 3.86266 6.56589 4.03865 6.29513L7.06437 1.36056C7.22683 1.10334 7.45697 0.974731 7.75481 0.974731C8.05264 0.974731 8.28279 1.10334 8.44524 1.36056L11.471 6.29513C11.647 6.56589 11.6537 6.84016 11.4913 7.11796C11.3288 7.39522 11.0919 7.53385 10.7805 7.53385H4.72908ZM12.2223 16.4689C11.207 16.4689 10.3438 16.1136 9.63279 15.4032C8.92232 14.6922 8.56708 13.829 8.56708 12.8136C8.56708 11.7983 8.92232 10.9351 9.63279 10.2241C10.3438 9.51363 11.207 9.15839 12.2223 9.15839C13.2377 9.15839 14.1008 9.51363 14.8118 10.2241C15.5223 10.9351 15.8776 11.7983 15.8776 12.8136C15.8776 13.829 15.5223 14.6922 14.8118 15.4032C14.1008 16.1136 13.2377 16.4689 12.2223 16.4689ZM1.25661 16.0627C1.02647 16.0627 0.833686 15.9847 0.678271 15.8288C0.522314 15.6734 0.444336 15.4806 0.444336 15.2505V10.3768C0.444336 10.1467 0.522314 9.95361 0.678271 9.79766C0.833686 9.64224 1.02647 9.56453 1.25661 9.56453H6.13026C6.3604 9.56453 6.55345 9.64224 6.70941 9.79766C6.86483 9.95361 6.94253 10.1467 6.94253 10.3768V15.2505C6.94253 15.4806 6.86483 15.6734 6.70941 15.8288C6.55345 15.9847 6.3604 16.0627 6.13026 16.0627H1.25661ZM12.2223 14.8443C12.7909 14.8443 13.2715 14.648 13.6641 14.2554C14.0567 13.8628 14.253 13.3822 14.253 12.8136C14.253 12.245 14.0567 11.7644 13.6641 11.3718C13.2715 10.9792 12.7909 10.7829 12.2223 10.7829C11.6537 10.7829 11.1731 10.9792 10.7805 11.3718C10.3879 11.7644 10.1916 12.245 10.1916 12.8136C10.1916 13.3822 10.3879 13.8628 10.7805 14.2554C11.1731 14.648 11.6537 14.8443 12.2223 14.8443ZM2.06889 14.4382H5.31798V11.1891H2.06889V14.4382ZM6.17087 5.9093H9.33874L7.75481 3.35063L6.17087 5.9093Z" fill="white"/>
                    </svg>}ITEM CATEGORIES
            </div>
            <ul>
              <li onClick={itemDropdown}>Mobile Phones</li>
              <li onClick={itemDropdown}>Laptop Computers</li>
              <li onClick={itemDropdown}>Head Phones</li>
              <li onClick={itemDropdown}>Smart Televisions</li>
              <li onClick={itemDropdown}>Game Consoles</li>
              <li onClick={itemDropdown}>Other Accessories</li>
            </ul>
      </div>
    </>
  )
}

export default ItemCategories